"use strict";exports.id=621,exports.ids=[621],exports.modules={9476:(e,t,n)=>{var r=n(7310).parse,o=n(2361),s=n(5687),i=n(3685),a=n(3837),c=["pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","secureProtocol","servername","checkServerIdentity"],u=[239,187,191],v=/^(cookie|authorization)$/i;function hasBom(e){return u.every(function(t,n){return e[n]===t})}function EventSource(e,t){var n,o=EventSource.CONNECTING,a=t&&t.headers,v=!1;Object.defineProperty(this,"readyState",{get:function(){return o}}),Object.defineProperty(this,"url",{get:function(){return e}});var l=this;function onConnectionClosed(t){o!==EventSource.CLOSED&&(o=EventSource.CONNECTING,_emit("error",new Event("error",{message:t})),E&&(e=E,E=null,v=!1),setTimeout(function(){o!==EventSource.CONNECTING||l.connectionInProgress||(l.connectionInProgress=!0,connect())},l.reconnectInterval))}l.reconnectInterval=1e3,l.connectionInProgress=!1;var p="";a&&a["Last-Event-ID"]&&(p=a["Last-Event-ID"],delete a["Last-Event-ID"]);var f=!1,d="",h="",E=null;function connect(){var d=r(e),h="https:"===d.protocol;if(d.headers={"Cache-Control":"no-cache",Accept:"text/event-stream"},p&&(d.headers["Last-Event-ID"]=p),a){var C=v?removeUnsafeHeaders(a):a;for(var m in C){var y=C[m];y&&(d.headers[m]=y)}}if(d.rejectUnauthorized=!(t&&!t.rejectUnauthorized),t&&void 0!==t.createConnection&&(d.createConnection=t.createConnection),t&&t.proxy){var g=r(t.proxy);h="https:"===g.protocol,d.protocol=h?"https:":"http:",d.path=e,d.headers.Host=d.host,d.hostname=g.hostname,d.host=g.host,d.port=g.port}if(t&&t.https){for(var S in t.https)if(-1!==c.indexOf(S)){var b=t.https[S];void 0!==b&&(d[S]=b)}}t&&void 0!==t.withCredentials&&(d.withCredentials=t.withCredentials),(n=(h?s:i).request(d,function(t){if(l.connectionInProgress=!1,500===t.statusCode||502===t.statusCode||503===t.statusCode||504===t.statusCode){_emit("error",new Event("error",{status:t.statusCode,message:t.statusMessage})),onConnectionClosed();return}if(301===t.statusCode||302===t.statusCode||307===t.statusCode){var n,r,s=t.headers.location;if(!s){_emit("error",new Event("error",{status:t.statusCode,message:t.statusMessage}));return}v=new URL(e).origin!==new URL(s).origin,307===t.statusCode&&(E=e),e=s,process.nextTick(connect);return}if(200!==t.statusCode)return _emit("error",new Event("error",{status:t.statusCode,message:t.statusMessage})),l.close();o=EventSource.OPEN,t.on("close",function(){t.removeAllListeners("close"),t.removeAllListeners("end"),onConnectionClosed()}),t.on("end",function(){t.removeAllListeners("close"),t.removeAllListeners("end"),onConnectionClosed()}),_emit("open",new Event("open"));var i=0,a=-1,c=0,p=0;t.on("data",function(e){n?(e.length>n.length-p&&((c=2*n.length+e.length)>262144&&(c=n.length+e.length+262144),r=Buffer.alloc(c),n.copy(r,0,0,p),n=r),e.copy(n,p),p+=e.length):(hasBom(n=e)&&(n=n.slice(u.length)),p=n.length);for(var t=0,o=p;t<o;){f&&(10===n[t]&&++t,f=!1);for(var s,v=-1,l=a,d=i;v<0&&d<o;++d)58===(s=n[d])?l<0&&(l=d-t):13===s?(f=!0,v=d-t):10===s&&(v=d-t);if(v<0){i=o-t,a=l;break}i=0,a=-1,parseEventStreamLine(n,t,l,v),t+=v+1}t===o?(n=void 0,p=0):t>0&&(p=(n=n.slice(t,p)).length)})})).on("error",function(e){l.connectionInProgress=!1,onConnectionClosed(e.message)}),n.setNoDelay&&n.setNoDelay(!0),n.end()}function _emit(){l.listeners(arguments[0]).length>0&&l.emit.apply(l,arguments)}function parseEventStreamLine(t,n,r,o){if(0===o){if(d.length>0){var s=h||"message";_emit(s,new MessageEvent(s,{data:d.slice(0,-1),lastEventId:p,origin:new URL(e).origin})),d=""}h=void 0}else if(r>0){var i=r<0,a=0,c=t.slice(n,n+(i?o:r)).toString();a=i?o:32!==t[n+r+1]?r+1:r+2,n+=a;var u=o-a,v=t.slice(n,n+u).toString();if("data"===c)d+=v+"\n";else if("event"===c)h=v;else if("id"===c)p=v;else if("retry"===c){var f=parseInt(v,10);Number.isNaN(f)||(l.reconnectInterval=f)}}}connect(),this._close=function(){o!==EventSource.CLOSED&&(o=EventSource.CLOSED,n.abort&&n.abort(),n.xhr&&n.xhr.abort&&n.xhr.abort())}}function Event(e,t){if(Object.defineProperty(this,"type",{writable:!1,value:e,enumerable:!0}),t)for(var n in t)t.hasOwnProperty(n)&&Object.defineProperty(this,n,{writable:!1,value:t[n],enumerable:!0})}function MessageEvent(e,t){for(var n in Object.defineProperty(this,"type",{writable:!1,value:e,enumerable:!0}),t)t.hasOwnProperty(n)&&Object.defineProperty(this,n,{writable:!1,value:t[n],enumerable:!0})}function removeUnsafeHeaders(e){var t={};for(var n in e)v.test(n)||(t[n]=e[n]);return t}e.exports=EventSource,a.inherits(EventSource,o.EventEmitter),EventSource.prototype.constructor=EventSource,["open","error","message"].forEach(function(e){Object.defineProperty(EventSource.prototype,"on"+e,{get:function(){var t=this.listeners(e)[0];return t?t._listener?t._listener:t:void 0},set:function(t){this.removeAllListeners(e),this.addEventListener(e,t)}})}),Object.defineProperty(EventSource,"CONNECTING",{enumerable:!0,value:0}),Object.defineProperty(EventSource,"OPEN",{enumerable:!0,value:1}),Object.defineProperty(EventSource,"CLOSED",{enumerable:!0,value:2}),EventSource.prototype.CONNECTING=0,EventSource.prototype.OPEN=1,EventSource.prototype.CLOSED=2,EventSource.prototype.close=function(){this._close()},EventSource.prototype.addEventListener=function(e,t){"function"==typeof t&&(t._listener=t,this.on(e,t))},EventSource.prototype.dispatchEvent=function(e){if(!e.type)throw Error("UNSPECIFIED_EVENT_TYPE_ERR");this.emit(e.type,e.detail)},EventSource.prototype.removeEventListener=function(e,t){"function"==typeof t&&(t._listener=void 0,this.removeListener(e,t))}},7621:(e,t,n)=>{e.exports=n(9476)}};